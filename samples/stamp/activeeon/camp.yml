#
# CAMP
#
# Copyright (C) 2017, 2018 SINTEF Digital
# All rights reserved.
#
# This software may be modified and distributed under the terms
# of the MIT license.  See the LICENSE file for details.
#

goals:
  running:
    - Proactive

components:

  proactive:
    provides_services: [Proactive]
    requires_services: [Database]
    implementation:
      docker:
        file: proactive/Dockerfile

  database:
    provides_services: [Database]
    variables:
      version:
        type: version
        values: [ mysql, postgres ]
        realization:
          - targets: [ database/Dockerfile ]
            pattern: "FROM database"
            replacements: [ "FROM mysql", "FROM postgres" ]
          - targets: [ database/Dockerfile ]
            pattern: "COPY init_database.sh"
            replacements: [ "COPY init_mysql.sh /root/init_database.sh", "COPY init_postgres.sh /root/init_database.sh" ]
    implementation:
      docker:
        file: database/Dockerfile
